{#
Modal Image Viewer Component

Renders an image with optional bounding box overlay canvas.
Used in detection_modal, orphan_modal, etc.

Args:
image_url (str): URL to the optimized/full image
image_alt (str): Alt text for accessibility
detection_id (int): Current detection ID
bbox (dict): Current detection bbox {x, y, w, h}
siblings (list): List of sibling detections with bbox data
dismissable (bool): If true, clicking image closes modal
#}
{% macro render_image_viewer(image_url, image_alt, detection_id, bbox=none, siblings=none, dismissable=true) %}
<div class="modal-image-viewer" style="position: relative; display: inline-block; max-width: 100%;">
    <img src="{{ image_url }}" alt="{{ image_alt }}" class="img-fluid bbox-base-image"
        style="max-height: 65vh; display: block;" {% if dismissable %} role="button" data-bs-dismiss="modal"
        aria-label="Close" title="Click to close" {% endif %} data-detection-id="{{ detection_id }}"
        onload="if(typeof initBboxOverlay==='function')initBboxOverlay(this)">
    <canvas class="bbox-overlay"
        style="position: absolute; top: 0; left: 0; pointer-events: none; display: none;"></canvas>
</div>
{% endmacro %}