<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="description" content="WatchMyBirds - AI-powered Bird Monitoring"><meta name="theme-color" content="#0f1a12"><title>Live Stream - WatchMyBirds</title><!-- Google Fonts: Inter --><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet"><!-- Bootstrap CSS (for grid utilities and components) --><link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"><!-- Design System (Source of Truth for all styling) --><link rel="stylesheet" href="/assets/design-system.css"></head><body><header class="app-bar" id="appBar"><a class="app-bar__brand" href="/"><img src="/assets/WatchMyBirds.png" alt="Logo"><span>WatchMyBirds</span></a><button class="app-bar__toggle" onclick="toggleNav()" aria-label="Toggle menu"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 12h18M3 6h18M3 18h18" /></svg></button><nav class="app-bar__nav" id="appBarNav"><a class="app-bar__link app-bar__link--primary active" href="/"> Live </a><a class="app-bar__link app-bar__link--primary" href="/gallery"> Gallery </a><a class="app-bar__link app-bar__link--primary" href="/analytics"> Analytics </a><span class="app-bar__spacer"></span><a class="app-bar__link app-bar__link--secondary" href="/species"> Species </a><a class="app-bar__link app-bar__link--secondary" href="/admin/review"> Review </a><a class="app-bar__link app-bar__link--secondary" href="/inbox"> Inbox </a><a class="app-bar__link app-bar__link--secondary" href="/trash"> Trash </a><a class="app-bar__link app-bar__link--secondary" href="/settings"> Settings </a><a class="app-bar__link app-bar__link--secondary" href="/logs"> Logs </a></nav></header><div class="status-bar" id="statusBar"><div class="status-bar__item" title="CPU Usage"><span class="status-bar__label">CPU</span><span class="status-bar__value" id="statusCpuVal">--%</span></div><div class="status-bar__item" title="Temperature"><span class="status-bar__value" id="statusTempVal">--Â°C</span></div><div class="status-bar__item" title="Free Disk Space"><span class="status-bar__value" id="statusDiskVal">-- GB</span></div></div><script> (function () { function updateStatus() { fetch('/api/v1/system/stats') .then(r => r.json()) .then(data => { if (data.status === 'success') { const cpu = Math.round(data.cpu); const cpuEl = document.getElementById('statusCpuVal'); cpuEl.textContent = cpu + '%'; // Only color when critical cpuEl.className = 'status-bar__value' + (cpu >= 85 ? ' status-bar__value--danger' : cpu >= 70 ? ' status-bar__value--warning' : ''); if (data.temp !== undefined) { const temp = Math.round(data.temp); const tempEl = document.getElementById('statusTempVal'); tempEl.textContent = temp + 'Â°C'; tempEl.className = 'status-bar__value' + (temp >= 70 ? ' status-bar__value--danger' : temp >= 60 ? ' status-bar__value--warning' : ''); } if (data.disk !== undefined) { const diskEl = document.getElementById('statusDiskVal'); diskEl.textContent = data.disk.free_gb + ' GB'; // Use absolute threshold: green if â‰¥100GB free, otherwise percent-based let diskClass = 'status-bar__value'; if (data.disk.free_gb < 100) { // Low absolute space - use percent thresholds if (data.disk.percent >= 90) { diskClass += ' status-bar__value--danger'; } else if (data.disk.percent >= 75) { diskClass += ' status-bar__value--warning'; } } // If â‰¥100GB free, stays default (green) regardless of percent diskEl.className = diskClass; } } }) .catch(() => { }); } updateStatus(); setInterval(updateStatus, 3000); })(); function toggleNav() { const nav = document.getElementById('appBarNav'); if (nav) nav.classList.toggle('open'); } document.addEventListener('DOMContentLoaded', function () { document.querySelectorAll('.app-bar__nav .app-bar__link').forEach(link => { link.addEventListener('click', () => { const nav = document.getElementById('appBarNav'); if (nav) nav.classList.remove('open'); }); }); document.addEventListener('click', function (e) { const nav = document.getElementById('appBarNav'); const toggle = document.querySelector('.app-bar__toggle'); if (nav && nav.classList.contains('open') && !nav.contains(e.target) && !toggle.contains(e.target)) { nav.classList.remove('open'); } }); }); </script><main class="page"><div class="container"><div class="page__header"><h1 class="page__title">WatchMyBirds</h1></div><div class="stream-wrapper"><div class="stream-container"><img id="video-feed" src="/video_feed" class="stream-video" alt="Live Stream"><div class="ptz-overlay"><div class="ptz-dpad"><div></div><button class="ptz-btn" id="ptz-up" title="Tilt Up" disabled>â–²</button><div></div><button class="ptz-btn" id="ptz-left" title="Pan Left" disabled>â—€</button><button class="ptz-btn center-btn" id="ptz-home" title="Home" disabled>âŒ‚</button><button class="ptz-btn" id="ptz-right" title="Pan Right" disabled>â–¶</button><div></div><button class="ptz-btn" id="ptz-down" title="Tilt Down" disabled>â–¼</button><div></div></div><div class="ptz-zoom"><button class="ptz-btn" id="ptz-zoom-out" title="Zoom Out" disabled>âˆ’</button><input type="range" id="ptz-zoom-slider" min="1" max="10" value="1" disabled><button class="ptz-btn" id="ptz-zoom-in" title="Zoom In" disabled>+</button></div><button class="ptz-btn" id="ptz-snapshot" title="Snapshot">ðŸ“·</button><button class="ptz-btn" id="ptz-fullscreen" title="Fullscreen">â›¶</button></div></div></div><div class="stats-row"><div class="stat-item"><div class="stat-item__value">100</div><div class="stat-item__label">Total Detections</div></div><div class="stat-item stat-item--accent"><div class="stat-item__value">0</div><div class="stat-item__label">Species Detected</div></div><div class="stat-item stat-item--secondary"><div class="stat-item__value">0</div><div class="stat-item__label">Today's Count</div></div><div class="stat-item stat-item--warning"><div class="stat-item__value">â€”</div><div class="stat-item__label">Monitoring Since</div></div></div><section class="section"><h2 class="section__title">A Rather Quiet Day at the Feeder</h2><div class="empty-state"><p class="empty-state__message">The birds appear to be having a lie-in today.</p><p class="empty-state__message">In the meantime, <a href="/species">browse past visitors</a> â€” we're always happy to see whatever pops by!</p></div></section></div></main><!-- Bootstrap JS Bundle --><script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script><script src="/assets/js/gallery_utils.js"></script><script> (function () { // Snapshot document.getElementById('ptz-snapshot').addEventListener('click', function () { const filename = 'snapshot_' + new Date().toISOString().slice(0, 19).replace(/:/g, '-') + '.jpg'; fetch('/api/snapshot') .then(r => r.blob()) .then(blob => { const url = URL.createObjectURL(blob); const a = document.createElement('a'); a.href = url; a.download = filename; a.click(); URL.revokeObjectURL(url); }) .catch(() => alert('Snapshot failed')); }); // Fullscreen document.getElementById('ptz-fullscreen').addEventListener('click', function () { const el = document.querySelector('.stream-container'); if (el.requestFullscreen) el.requestFullscreen(); else if (el.webkitRequestFullscreen) el.webkitRequestFullscreen(); }); })(); </script></body></html>